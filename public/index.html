<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Zalagh Plancher</title>
    <style>
      :root {
        --brand: #1976d2;
        --brand-dark: #0d47a1;
        --text: #1f2937;
        --muted: #6b7280;
        --bg: #f3f4f6;
        --card: #ffffff;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        color: var(--text);
        background: var(--bg);
      }
      .hero {
        position: relative;
        display: grid;
        grid-template-columns: 1.2fr 1fr;
        gap: 24px;
        align-items: center;
        padding: 48px 24px 24px;
        max-width: 1080px;
        margin: 0 auto;
      }
      header {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 16px 24px;
        background: var(--card);
        border-bottom: 1px solid #e5e7eb;
      }
      header img.logo { height: 48px; width: 48px; object-fit: contain; }
      header h1 { font-size: 20px; margin: 0; color: var(--brand-dark); }
      .gallery {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }
      .gallery img { width: 100%; height: 180px; object-fit: cover; border-radius: 10px; }
      .tag { display: inline-block; background: #e3f2fd; color: var(--brand-dark); padding: 6px 10px; border-radius: 9999px; font-size: 12px; }
      .title { font-size: 32px; margin: 12px 0 8px; color: var(--brand-dark); }
      .subtitle { color: var(--muted); margin: 0 0 24px; }
      .card { background: var(--card); padding: 24px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.06); border: 1px solid #e5e7eb; }
      form label { display: block; margin: 10px 0 6px; color: var(--muted); font-size: 14px; }
      input, button { width: 100%; padding: 12px 14px; border-radius: 10px; border: 1px solid #e5e7eb; }
      input:focus { outline: none; border-color: var(--brand); box-shadow: 0 0 0 3px rgba(25,118,210,0.15); }
      button { background: var(--brand); color: white; border: none; cursor: pointer; font-weight: 600; }
      button:hover { background: var(--brand-dark); }
      .error { color: #b00020; margin-top: 8px; min-height: 18px; }
      .footer { text-align: center; color: var(--muted); padding: 20px; font-size: 12px; }
      @media (max-width: 900px) { .hero { grid-template-columns: 1fr; padding-top: 24px; } }
    </style>
  </head>
  <body>
    <header>
      <img class="logo" src="/asset/téléchargement.jpg" alt="Zalagh Plancher" />
      <h1>Zalagh Plancher</h1>
    </header>
    <section class="hero">
      <div>
        <span class="tag">Qualité • Béton prêt à l'emploi • Livraison</span>
        <h2 class="title">Bienvenue chez Zalagh Plancher</h2>
        <p class="subtitle">Connectez-vous pour accéder à l'espace administrateur ou employé.</p>
        <div class="card">
          <form id="loginForm">
            <label>Email</label>
            <input id="email" type="email" required placeholder="ex: admin@example.com" />
            <label>Mot de passe</label>
            <input id="password" type="password" required placeholder="Votre mot de passe" />
            <button type="submit" style="margin-top:12px;">Se connecter</button>
            <div id="error" class="error"></div>
          </form>
          <p style="margin:10px 0 0; color: var(--muted); font-size:12px;">Admins seed: khalid@gmail.com / lahlou@gmail.com — mdp: admin123</p>
        </div>
      </div>
      <div class="gallery">
        <img src="/asset/45.jpg" alt="Chantier" />
        <img src="/asset/images.jpg" alt="Flotte" />
      </div>
    </section>
    <div class="footer">© ${new Date().getFullYear?.() || ''} Zalagh Plancher</div>
    <script>
      const form = document.getElementById('loginForm');
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const res = await fetch('/api/login', {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password })
        });
        if (!res.ok) {
          const data = await res.json().catch(() => ({}));
          document.getElementById('error').textContent = data.error || 'Erreur de connexion';
          return;
        }
        const data = await res.json();
        if (data.role === 'admin') {
          localStorage.setItem('token', data.token);
          location.href = '/admin.html';
        } else if (data.role === 'employee') {
          localStorage.setItem('employee_token', data.token);
          location.href = '/employee-profile.html';
        } else {
          document.getElementById('error').textContent = 'Rôle inconnu';
        }
      });
    </script>
  </body>
  </html>


